<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>雷东燕</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            touch-action: none;
        }

        body {
            overflow: hidden;
            font-family: Arial, sans-serif;
            background-color: #000000; /* 新增背景色设置 */
        }

        .container {
            position: relative;
            height: 100vh;
            width: 100vw;
        }

        .folder {
            position: absolute;
            width: 100%;
            height: 100%;
            transition: transform 0.5s ease;
        }

        .carousel {
            display: flex;
            width: 100%;
            height: 100%;
            transition: transform 0.5s ease;
        }

        .item {
            flex: 0 0 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        img, video {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            pointer-events: none; /* 新增：禁止媒体元素交互 */
        }

        video {
            background-color: black;
        transform: translate3d(0,0,0); /* 启用硬件加速 */
        will-change: transform; /* 提示浏览器提前优化 */
        backface-visibility: hidden;
        perspective: 1000px;
        }
.caption {
    position: absolute;
    bottom: 0px;
    left: 0px;
    right: 20px;
    color: #FFFFFF;
    font-size: 14px;
    line-height: 1.5;
    background: rgba(255, 255, 255, 0);
    padding: 15px;
    border-radius: 8px;
    z-index: 100;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    pointer-events: none;
    text-align: left; /* 文字左对齐 */
    width: calc(100% - 0px); /* 左右各留0px边距 */
    margin: 0 auto; /* 水平居中 */
    max-width: none; /* 移除最大宽度限制 */
        }
        .caption br {
            display: block;
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Folder 1 -->
        <div class="folder" data-bgm="250113.mp3" style="transform: translateY(0%)">
            <div class="caption">
                2025年01月13日<br><br>
                我决定做一个照照镜子就能开心一整天的人#我决定重新爱上阳光#每一种生活都值得被记录<br><br>
                BGM：跳楼机(1.1)_我们的感情好像跳楼机-FBI利比
            </div>
            <audio class="bgm" loop>
                <source src="250113.mp3" type="audio/mpeg">
            </audio>
            <div class="carousel">
                <div class="item"><img src="250113-1.webp"></div>
                <div class="item"><img src="250113-2.webp"></div>
                <div class="item"><img src="250113-3.webp"></div>
                <div class="item"><img src="250113-4.webp"></div>
                <div class="item"><img src="250113-5.webp"></div>
                <div class="item"><img src="250113-6.webp"></div>
                <div class="item"><img src="250113-7.webp"></div>
            </div>
        </div>

        <!-- Folder 2 -->
        <div class="folder" data-bgm="241116.mp3" style="transform: translateY(100%)">
            <div class="caption">
                2024年11月16日<br><br>
                <br><br>
                BGM：幸福总是二倍速 佳梁 专属原声
            </div>
            <audio class="bgm" loop>
                <source src="241116.mp3" type="audio/mpeg">
            </audio>
            <div class="carousel">
                <!-- 移除controls属性 -->
                <div class="item"><video loop muted><source src="241116-1.mp4" type="video/mp4"></video></div>
                <div class="item"><video loop muted><source src="241116-2.mp4" type="video/mp4"></video></div>
            </div>
        </div>

        <!-- Folder 3 -->
        <div class="folder" data-bgm="241022.mp3" style="transform: translateY(200%)">
            <div class="caption">
                2024年10月22日<br><br>
                有迹可循的moment#宝宝你看镜头#一直在一起的人才值得炫耀<br><br>
                BGM：忘见川创建的原声
            </div>
            <audio class="bgm" loop>
                <source src="241022.mp3" type="audio/mpeg">
            </audio>
            <div class="carousel">
                <!-- 移除controls属性 -->
                <div class="item"><video loop muted><source src="241022-1.mp4" type="video/mp4"></video></div>
                <div class="item"><video loop muted><source src="241022-2.mp4" type="video/mp4"></video></div>
                <div class="item"><video loop muted><source src="241022-3.mp4" type="video/mp4"></video></div>
                <div class="item"><video loop muted><source src="241022-4.mp4" type="video/mp4"></video></div>
                <div class="item"><video loop muted><source src="241022-5.mp4" type="video/mp4"></video></div>
            </div>
        </div>
        <!-- Folder 4 -->
        <div class="folder" data-bgm="240912.mp3" style="transform: translateY(300%)">
             <div class="caption">
                  2024年09月12日<br><br>
                  于是 我驻足。@L<br><br>
                  BGM：你是我的风景-李涵野
             </div>
         <audio class="bgm" loop>
        <source src="240912.mp3" type="audio/mpeg">
    </audio>
    <div class="carousel">
                  <div class="item"><img src="240912-1.webp"></div>
                  <div class="item"><img src="240912-2.webp"></div>
    </div>
</div>
<!-- 原有文件夹1-4代码... -->

<!-- Folder 5 -->
<div class="folder" data-bgm="240808.mp3" style="transform: translateY(400%)">
    <div class="caption">
        2024年08月08日<br><br>
        冬天来的时候你还在不在#原相机live#冬天<br><br>
        BGM：认真的雪-李佩玲
    </div>
    <audio class="bgm" loop>
        <source src="240808.mp3" type="audio/mpeg">
    </audio>
    <div class="carousel">
        <div class="item"><img src="240808.webp"></div>
    </div>
</div>

<!-- Folder 6 -->
<div class="folder" data-bgm="240603.mp3" style="transform: translateY(500%)">
    <div class="caption">
        2024年06月03日<br><br>
        #生活碎片记录<br><br>
        BGM：冬眠·2023-阿YueYue刘兆宇
    </div>
    <audio class="bgm" loop>
        <source src="240603.mp3" type="audio/mpeg">
    </audio>
    <div class="carousel">
        <div class="item"><img src="240603-1.webp"></div>
        <div class="item"><img src="240603-2.webp"></div>
        <div class="item"><img src="240603-3.webp"></div>
    </div>
</div>

<!-- Folder 7 -->
<div class="folder" data-bgm="240501.mp3" style="transform: translateY(600%)">
    <div class="caption">
        2024年05月01日<br><br>
        Oh爱本是尘埃#夏天的味道#原相机#分享照片<br><br>
        BGM：爱本是尘埃(降调版)_胖猫
    </div>
    <audio class="bgm" loop>
        <source src="240501.mp3" type="audio/mpeg">
    </audio>
    <div class="carousel">
        <div class="item"><video loop muted><source src="240501-1.mp4" type="video/mp4"></video></div>
        <div class="item"><video loop muted><source src="240501-2.mp4" type="video/mp4"></video></div>
    </div>
</div>

<!-- Folder 8 -->
<div class="folder" data-bgm="240116.mp3" style="transform: translateY(700%)">
    <div class="caption">
        2024年01月16日<br><br>
        幸福开始有预兆<br><br>
        BGM：傻瓜 珍惜才配拥有-纯音乐小助手
    </div>
    <audio class="bgm" loop>
        <source src="240116.mp3" type="audio/mpeg">
    </audio>
    <div class="carousel">
        <div class="item"><video loop muted><source src="240116.mp4" type="video/mp4"></video></div>
    </div>
</div>
    </div>

<script>
    let startX, startY;
    let currentFolderIndex = 0;
    let currentItems = [0, 0, 0, 0, 0, 0, 0, 0];
    const folders = document.querySelectorAll('.folder');
    const bgms = document.querySelectorAll('.bgm');

    // 预加载管理器
    const preloadManager = {
        preloadedVideos: new Set(),
        preloadVideo(video) {
            if (!this.preloadedVideos.has(video)) {
                video.preload = 'auto';
                video.load();
                this.preloadedVideos.add(video);
            }
        }
    };

    // 触摸事件处理
    document.addEventListener('touchstart', e => {
        startX = e.touches[0].clientX;
        startY = e.touches[0].clientY;
    });

    document.addEventListener('touchend', e => {
        const endX = e.changedTouches[0].clientX;
        const endY = e.changedTouches[0].clientY;
        const deltaX = endX - startX;
        const deltaY = endY - startY;

        if (Math.abs(deltaY) > Math.abs(deltaX) && Math.abs(deltaY) > 50) {
            handleVerticalSwipe(deltaY);
        } else if (Math.abs(deltaX) > 50) {
            handleHorizontalSwipe(deltaX);
        }
    });

    // 点击控制
    document.addEventListener('click', toggleMediaPlayback);

    // 垂直滑动处理
    function handleVerticalSwipe(deltaY) {
        if (deltaY > 0 && currentFolderIndex > 0) {
            currentFolderIndex--;
        } else if (deltaY < 0 && currentFolderIndex < folders.length - 1) {
            currentFolderIndex++;
        }
        updateFolders();
    }

    // 水平滑动处理
    function handleHorizontalSwipe(deltaX) {
        const folder = folders[currentFolderIndex];
        const itemCount = folder.querySelectorAll('.item').length;
        
        if (deltaX > 0 && currentItems[currentFolderIndex] > 0) {
            currentItems[currentFolderIndex]--;
        } else if (deltaX < 0 && currentItems[currentFolderIndex] < itemCount - 1) {
            currentItems[currentFolderIndex]++;
        }
        updateCarousel(folder);
    }

    // 切换媒体播放状态
    function toggleMediaPlayback() {
        const currentFolder = folders[currentFolderIndex];
        const isPlaying = !currentFolder.querySelector('.bgm').paused;

        currentFolder.querySelectorAll('video, audio').forEach(media => {
            isPlaying ? media.pause() : media.play();
        });
    }

    // 更新文件夹视图
    function updateFolders() {
        folders.forEach((folder, index) => {
            folder.style.transform = `translateY(${(index - currentFolderIndex) * 100}%)`;
            
            if (index === currentFolderIndex) {
                preloadVideos(folder);
            } else {
                resetVideos(folder);
            }
        });

        currentItems[currentFolderIndex] = 0;
        updateCarousel(folders[currentFolderIndex]);
        playCurrentBGM();
    }

    // 预加载当前文件夹视频
    function preloadVideos(folder) {
        folder.querySelectorAll('video').forEach(video => {
            preloadManager.preloadVideo(video);
        });
    }

    // 重置非活跃视频
    function resetVideos(folder) {
        folder.querySelectorAll('video').forEach(video => {
            video.pause();
            video.currentTime = 0;
        });
    }

    // 更新轮播位置
    function updateCarousel(folder) {
        const offset = -currentItems[currentFolderIndex] * 100;
        folder.querySelector('.carousel').style.transform = `translateX(${offset}%)`;
        playCurrentVideo();
    }

    // 播放当前BGM
    function playCurrentBGM() {
        bgms.forEach((bgm, index) => {
            index === currentFolderIndex ? bgm.play() : bgm.pause();
        });
    }

    // 优化视频播放
    function playCurrentVideo() {
        const currentFolder = folders[currentFolderIndex];
        const items = currentFolder.querySelectorAll('.item');
        
        items.forEach((item, index) => {
            const video = item.querySelector('video');
            if (!video) return;

            if (index === currentItems[currentFolderIndex]) {
                video.play().catch(() => {
                    video.muted = true;
                    video.play();
                });
            } else {
                video.pause();
                video.currentTime = 0;
            }
        });
    }

    // 初始化优化
    window.addEventListener('DOMContentLoaded', () => {
        // 预加载首个文件夹视频
        preloadVideos(folders[0]);
        // 启动初始播放
        playCurrentBGM();
        playCurrentVideo();
    });
</script>
</body>
</html>